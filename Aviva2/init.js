define(["require","jquery","bowser","app/util/picturePolyfill","app/util/utility"],function(t,o,i,e,n){"use strict";function r(){var i=this;this.isSupportedBrowser="querySelector"in document&&"sessionStorage"in window&&"addEventListener"in window,this.$html=o("html"),this.$body=o("body"),this.$modernizrScript=o(".modernizr"),this.initializedComponents=[],window.onloadRecaptchaCallback=function(){i.$body.trigger("recaptchaLibLoaded",arguments),n.triggerEvent(i.$body[0],"recaptchaLibLoaded"),i.$html.addClass("recaptcha-loaded")}}r.prototype={init:function(){(i.msie||i.msedge)&&e.callPicturefill(),this.modernizrPromise(this.checkObjectfit.bind(this)),this.isSupportedBrowser&&(this.babelPolyfillLoaded().always(this.componentScan.bind(this)),this.$body.on("componentScan",this.componentScan.bind(this))),this.checkJQueryAnimations()},babelPolyfillLoaded:function(){var i,t=0,e=this,n=new o.Deferred;return(i=function(){return e.$html.hasClass("babel-polyfill-loaded")?n.resolve():5e3<t?n.reject():void setTimeout(function(){t+=100,i()},100)}).call(this),n},checkObjectfit:function(){Modernizr.objectfit||e.pictureFitPolyfill()},modernizrPromise:function(i){"undefined"==typeof Modernizr?this.$modernizrScript.on("load",i):i()},componentScan:function(){var n=this,i=document.querySelectorAll("[data-component]");n.initializedComponents.length&&(i=Array.prototype.filter.call(i,function(i){return n.initializedComponents.indexOf(i)<0})),Array.prototype.forEach.call(i,function(e){var i=e.getAttribute("data-component");t(["app/blocks/"+i],function(i){var t=new i(o(e));t&&"init"in t&&n.modernizrPromise(t.init.bind(t)),n.initializedComponents.push(e)})})},checkJQueryAnimations:function(){o.fx.off=!FRAMEWORK.animation}},(new r).init()});