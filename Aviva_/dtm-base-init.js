!function(t){"use strict";t.DTMUtils={baseSettings:{selectors:{errorSection:".content-hero__wrapper, .article-hero, h1",coveoSearchRoot:".search",coveoPager:".CoveoPager"},pageNameKey:"pageName"},init:function(){void 0!==t.digitalDataSubset&&(t.digitalData=this.processDataSubset(t.digitalDataSubset))},processDataSubset:function(e){var t=this.updateWithSearch(e);return this.updateWithErrorMessage(t)},updateWithSearch:function(i){if("undefined"!=typeof Coveo&&void 0!==i.search){var e=Coveo.$$(document),u=e.find(this.baseSettings.selectors.coveoSearchRoot),c=e.find(this.baseSettings.selectors.coveoPager),g=this;Coveo.$$(u).on("deferredQuerySuccess",function(e,t){var r=t.results,a=t.query,o=t.queryBuilder,s=Coveo.get(c),n=g.getAndDeletePageNameFromStorage();g.extend(i.search,{pageNum:s.currentPage,resultsDisplayed:r.results.length,term:Coveo.state(u,"q"),totalPages:Math.ceil(r.totalCountFiltered/o.numberOfResults),totalResults:r.totalCountFiltered,facet:a.tab}),n&&(i.search.location=n)})}return i},getAndDeletePageNameFromStorage:function(){var e=sessionStorage.getItem(this.baseSettings.pageNameKey);return sessionStorage.removeItem(this.baseSettings.pageNameKey),e},extend:function(e){for(var t=e||{},r=1;r<arguments.length;r++)if(arguments[r])for(var a in arguments[r])arguments[r].hasOwnProperty(a)&&(t[a]=arguments[r][a]);return t},updateWithErrorMessage:function(e){if(void 0!==e.page.errorCode){var t=document.querySelector(this.baseSettings.selectors.errorSection).textContent.replace(/\s+/g," ").trim().toLowerCase();e.page.errorMessage=t}return e},getNavLevels:function(e){var r=!0===e?t.digitalData:t.digitalDataSubset;return this.getPropsFromObject(r.page,"key").filter(function(e){return 0===e.indexOf("navLevel")}).reduce(function(e,t){return e[t]=r.page[t],e},{})},getPropsFromObject:function(e,t){var r,a,o=[];for(a in e)e.hasOwnProperty(a)&&(r="key"===t?a:e[a],o.push(r));return o}}}(window);